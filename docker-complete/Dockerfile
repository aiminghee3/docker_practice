FROM node

WORKDIR /app

COPY . /app

RUN npm install

EXPOSE 80

CMD ["node", "server.js"]

# 첫 번째 위치 이미지의 외부 경로이며 이미지로 복사되어야 할 파일들이 있는 곳 -> . 이므로 도커에개 Dockerfile이 포함된 동일한 폴더임을 알림, Dockerfile은 제외
# 두 번째 위치는 그 파일을 저장해야 하는 이미지 내부의 경로 
# 만약  COPY . /app 이면 Dockerfile과 동일한 폴더에 있는 모든 파일과 거기에 있는 하위 C폴더가 컨테이너 내부의 app폴더에 복사됨, app폴더가 없으면 이미지와 컨테이너에 생성됨
# 1. 우리가 /app폴더에 복사를 했으니 명령어를 /app폴더에서 실행해야함
# 2. 명령어를 /app폴더에서 실행하기 위해 도커 컨테이너의 작업 디렉토리를 설정하는 WORKDIR 명령어를 이용하여 도커에게 모든 후속 명령이 WORKDIR에 명시된 폴더 내부에서 실행될 것임을 알림
# 3. WORKDIR /app으로 설정해줬기 때문에 RUN뿐만 아니라 COPY도 .app디렉토리를 기준으로 실행됨 따라서 -> COPY . /app -> COPY . ./(현재 작업 디렉토리-/app)로 변경 근데 절대경로인 /app을 강의자는 선호함
# CMD 명령은 이미지가 생성될 때 실행(RUN)되지 않고 이미지를 기반으로 컨테이너가 시작될 때 실행됨
# 컨테이너가 시작될 떄 우리의 로컬 시스템에 특정 포트를 노출하고 싶다는 것을 도커에 알리는 EXPOSE명령어를 추가함 80인 이유는 server.js에 있음